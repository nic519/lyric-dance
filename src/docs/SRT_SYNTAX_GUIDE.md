# SRT 动态歌词标记系统指南

本系统在标准 SRT 字幕格式的基础上，扩展了一套基于 BBCode 风格的标记语法，用于在视频渲染时实现丰富的动态效果。

## 1. 基础动效标签

### 放大回弹 (`[zoom]`)
使包裹的文字在入场时产生明显的回弹放大效果，非常适合强调关键词。
- **语法**：`[zoom]关键字[/zoom]`
- **效果**：文字缩放倍率从 2x 快速过渡到 1x（或在水平模式下产生 1.4x 的呼吸感）。

### 随机抖动 (`[shake]`)
使文字产生高频的随机位置偏移，适合表现紧张、激昂或震撼的情绪。
- **语法**：`[shake]震撼[/shake]`
- **效果**：文字在 X/Y 轴产生随机像素偏移。

### 颜色自定义 (`[color]`)
修改指定文字的颜色。
- **语法**：`[color=#十六进制]文字[/color]`
- **示例**：`[color=#ff0000]红色警告[/color]`
- **注意**：必须使用标准的 6 位或 8 位十六进制颜色代码。

---

## 2. 布局与逻辑规则

### 空格的处理 (` `)
空格在系统中具有特殊的逻辑意义：
- **水平模式 (Captions)**：
    - 一句歌词中的空格会将句子拆分为多个“时间段”。
    - 文字会**按顺序依次显示**。
    - 例如：`我 爱 你`，这三个词会平分该条字幕的时长，依次蹦出。
- **垂直模式 (VerticalCaptions)**：
    - 空格会触发**换列**。
    - 歌词会从右向左进行多列排版，非常适合古风或极简视觉设计。

### 标签嵌套
系统支持多个标签组合使用，以叠加效果。
- **示例**：`[zoom][shake][color=#ffcc00]黄金爆炸[/color][/shake][/zoom]`
- **效果**：文字同时具有金黄色、放大回弹和剧烈抖动效果。

---

## 3. SRT 文件示例

你可以像编写普通字幕一样在 `.srt` 文件中使用这些标记：

```srt
1
00:00:01,000 --> 00:00:04,000
[zoom]大地[/zoom] [color=#ffcc00]BEYOND[/color]

2
00:00:05,000 --> 00:00:08,000
在那些 [color=#44ff44]苍翠[/color] 的路上

3
00:00:08,500 --> 00:00:11,500
历遍了 [shake]多少创伤[/shake]

4
00:00:12,000 --> 00:00:15,000
[zoom][shake]震撼[/shake][/zoom] 效果演示
```

---

## 4. 技术细节 (仅供参考)
- **解析器位置**：`src/remotion/AudioViz/utils/caption-utils.ts`
- **渲染组件**：`Captions.tsx` (水平), `VerticalCaptions.tsx` (垂直)
- **性能提示**：由于系统会对每个字符进行独立的 Spring 动画计算，建议单条字幕长度控制在 50 字符以内以获得最佳流畅度。
